<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Plataforma de Engenharia</title>

    <!-- Google Fonts -->
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@400;700&family=Roboto+Mono&family=Roboto:wght@400;700&display=swap" rel="stylesheet" />

    <!-- CSS -->
    <link rel="stylesheet" href="style.css" />

    <!-- Bibliotecas JS -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js" defer></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2canvas/1.4.1/html2canvas.min.js" defer></script>

    <!-- Script principal -->
    <script src="script.js" defer></script>
</head>
<body>
    <div class="platform-container">
        <!-- Sidebar esquerda: biblioteca e projetos -->
        <aside id="component-library" aria-label="Biblioteca de Componentes e Projetos">
            <div class="user-panel">
                <span id="welcome-message" aria-live="polite">Bem-vindo!</span>
                <!-- Botão de logout removido para site estático -->
            </div>

            <section id="projects-panel" aria-label="Meus Projetos">
                <h3>Meus Projetos</h3>
                <ul id="project-list" role="listbox" tabindex="0" aria-live="polite">
                    <!-- Projetos carregados via JS -->
                </ul>
            </section>

            <section id="library-panel" aria-label="Biblioteca de Componentes">
                <h3>Biblioteca</h3>
                <div class="component-item">
                    <span>Motor</span>
                    <button class="add-btn" data-type="motor" aria-label="Adicionar Motor">+</button>
                </div>
                <div class="component-item">
                    <span>Polia Motora</span>
                    <button class="add-btn" data-type="polia_motora" aria-label="Adicionar Polia Motora">+</button>
                </div>
                <div class="component-item">
                    <span>Polia Movida</span>
                    <button class="add-btn" data-type="polia_movida" aria-label="Adicionar Polia Movida">+</button>
                </div>
                <div class="component-item">
                    <span>Rolamento</span>
                    <button class="add-btn" data-type="rolamento" aria-label="Adicionar Rolamento">+</button>
                </div>
            </section>
        </aside>

        <!-- Área principal -->
        <main id="main-workbench" role="main" aria-label="Bancada de Trabalho Virtual">
            <header class="workbench-header">
                <h1>Bancada de Trabalho Virtual</h1>
            </header>

            <div id="desktop-action-bar" role="toolbar" aria-label="Barra de Ações">
                <button id="desktop-save-btn" class="btn btn-action" title="Salvar Projeto" aria-haspopup="dialog">Salvar</button>
                <button id="desktop-clear-btn" class="btn btn-action" title="Limpar Bancada">Limpar</button>
                <button id="desktop-settings-btn" class="btn btn-action" title="Otimizar Sistema" aria-haspopup="dialog">Otimizar</button>
                <button id="desktop-analyze-btn" class="btn btn-action-highlight" title="Analisar Sistema">Analisar</button>
            </div>

            <div id="workbench-area" style="position: relative; width: 100%; height: 500px; border: 1px solid #ccc;" tabindex="0" aria-label="Área da Bancada">
                <svg id="connection-canvas" width="100%" height="100%" style="position:absolute; top:0; left:0; pointer-events:none;" aria-hidden="true"></svg>
                <!-- Componentes renderizados via JS -->
            </div>
        </main>

        <!-- Painel de resultados -->
        <aside id="results-panel" class="hidden" aria-live="polite" aria-label="Painel de Resultados">
            <h2>Análise do Sistema</h2>
            <div id="results-content"></div>
            <button id="generate-pdf-btn" class="hidden" aria-label="Gerar Relatório PDF">Gerar Relatório PDF</button>
        </aside>
    </div>

    <!-- Modais -->

    <!-- Modal Salvar Projeto -->
    <div id="save-project-modal" class="modal-backdrop hidden" role="dialog" aria-modal="true" aria-labelledby="save-project-title" tabindex="-1">
        <div class="modal-content">
            <h3 id="save-project-title">Salvar Projeto</h3>
            <form id="save-project-form">
                <div class="input-group">
                    <label for="project-name">Nome do Projeto</label>
                    <input type="text" id="project-name" name="project_name" required autocomplete="off" />
                </div>
                <button type="submit" class="btn btn-highlight">Salvar Projeto</button>
                <button type="button" id="save-modal-close-btn" class="btn btn-secondary">Cancelar</button>
            </form>
        </div>
    </div>

    <!-- Modal Configurar Componente -->
    <div id="component-modal" class="modal-backdrop hidden" role="dialog" aria-modal="true" aria-labelledby="modal-title" tabindex="-1">
        <div class="modal-content">
            <h3 id="modal-title">Configurar Componente</h3>
            <form id="modal-form">
                <div id="modal-fields"></div>
                <button type="submit" class="btn btn-highlight">Salvar</button>
                <button type="button" id="modal-close-btn" class="btn btn-secondary">Cancelar</button>
            </form>
        </div>
    </div>

    <!-- Modal Otimizar Sistema -->
    <div id="optimize-modal" class="modal-backdrop hidden" role="dialog" aria-modal="true" aria-labelledby="optimize-title" tabindex="-1">
        <div class="modal-content">
            <h3 id="optimize-title">Otimizar Sistema</h3>
            <form id="optimize-form">
                <p>Selecione um objetivo para otimizar o seu sistema:</p>
                <div class="input-group">
                    <input type="radio" id="goal-cost" name="optimization_goal" value="cost" checked />
                    <label for="goal-cost">Minimizar Custo Operacional</label>
                </div>
                <div class="input-group">
                    <input type="radio" id="goal-life" name="optimization_goal" value="life" />
                    <label for="goal-life">Maximizar Vida Útil (L10h)</label>
                </div>
                <div class="input-group">
                    <input type="radio" id="goal-efficiency" name="optimization_goal" value="efficiency" />
                    <label for="goal-efficiency">Maximizar Eficiência</label>
                </div>
                <button type="submit" class="btn btn-highlight">Otimizar</button>
                <button type="button" id="optimize-modal-close-btn" class="btn btn-secondary">Cancelar</button>
            </form>
        </div>
    </div>

    <!-- Barra de ações mobile -->
    <div id="mobile-action-bar" role="toolbar" aria-label="Barra de Ações Mobile">
        <button id="save-button" class="btn btn-action" title="Salvar Projeto" aria-haspopup="dialog">Salvar</button>
        <button id="clear-button" class="btn btn-action" title="Limpar Bancada">Limpar</button>
        <button id="settings-button" class="btn btn-action" title="Otimizar Sistema" aria-haspopup="dialog">Otimizar</button>
        <button id="analyze-button-mobile" class="btn btn-action-highlight" title="Analisar Sistema">Analisar</button>
    </div>

</body>
</html>
